TODO:
- remove dependency on EGachine.getResource
- clean up (remove boost)
